<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>mailmail</title>
    <style>
        :root { --primary: #4C97FF; --accent: #2b7fff; --bg: #f4f7f9; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; margin: 0; background: var(--bg); overflow-x: hidden; }
        
        /* --- ğŸ” ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ã‚¬ãƒ¼ãƒ‰ç”»é¢ --- */
        #mm-auth-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            z-index: 10000; display: flex; justify-content: center; align-items: center;
        }
        .auth-card {
            background: rgba(255, 255, 255, 0.98); padding: 50px; border-radius: 32px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.2); width: 360px; text-align: center;
            backdrop-filter: blur(10px); animation: fadeIn 0.8s ease;
        }
        .logo-icon {
            width: 70px; height: 70px; background: var(--primary); border-radius: 20px;
            display: flex; justify-content: center; align-items: center; margin: 0 auto 20px;
            box-shadow: 0 10px 20px rgba(76, 151, 255, 0.3); color: white; font-size: 38px; font-weight: 900;
        }
        .auth-card h1 { color: #333; margin: 0; font-size: 28px; font-weight: 800; letter-spacing: -1px; }
        .auth-card input {
            width: 100%; padding: 16px; margin: 10px 0;
            border: 2px solid #f0f3f6; border-radius: 14px; box-sizing: border-box;
            font-size: 16px; outline: none; background: #f8fafc; transition: 0.3s;
        }
        .auth-card input:focus { border-color: var(--primary); background: white; }
        .login-btn {
            width: 100%; padding: 18px; background: var(--primary); color: white;
            border: none; border-radius: 14px; cursor: pointer; font-weight: bold; font-size: 17px; margin-top: 20px;
            box-shadow: 0 10px 25px rgba(76, 151, 255, 0.3); transition: 0.3s;
        }
        .login-btn:hover { transform: translateY(-2px); box-shadow: 0 15px 30px rgba(76, 151, 255, 0.4); }

        /* --- ğŸ”“ èªè¨¼å¾Œã®ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ --- */
        #main-app { display: none; min-height: 100vh; animation: contentSlide 0.6s ease; }
        header { background: white; padding: 15px 40px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 100; }
        .app-logo { color: var(--primary); font-weight: 900; font-size: 26px; }
        .content-body { padding: 40px; max-width: 1000px; margin: 0 auto; line-height: 1.6; color: #444; }

        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        @keyframes contentSlide { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<!-- ğŸ”‘ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ -->
<div id="mm-auth-overlay">
    <div class="auth-card">
        <div class="logo-icon">m</div>
        <h1>mailmail</h1>
        <p id="mm-status" style="font-size:13px; color:#999; margin-top:10px;">ã™ã¹ã¦ã®å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³</p>
ã€€ã€€ã€€ã€€<a style="font-size:13px; color:#0000EE; margin-top:10px;"href="https://2015kaito8169/github.io/mailmaides/">ã“ã®ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚ŒãŸç†ç”±</a>ã€€
		<input type="text" id="mm-id" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼ID">
        <input type="password" id="mm-pw" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
        <button class="login-btn" onclick="handleLogin()">ãƒ­ã‚°ã‚¤ãƒ³</button>
        <p id="mm-status" style="font-size:13px; color:#999; margin-top:10px;">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã‹</p>
		<a href="https://mailmailservice.onrender.com/">æ–°è¦ç™»éŒ²</a>
               <p id="mm-status" style="font-size:13px; color:#999; margin-top:10px;">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¿˜ã‚Œã¾ã—ãŸã‹</p>
		<a href="https://2015kaito8169.github.io/mailmailpassword/">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¾©å…ƒ</a>
	</div>
</div>

<!-- ğŸ“¦ éš ã—ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ (ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸå¾Œã«è¡¨ç¤º) -->
<div id="main-app">
    <header>
        <div class="app-logo">mailmailåˆ†å®¶API</div>
        <div style="display:flex; align-items:center; gap:20px;">
            <span id="user-display" style="font-weight: 800; color: #555;"></span>
            <button onclick="logout()" style="background:#ff4c4c; color:white; border:none; padding:8px 18px; border-radius:10px; cursor:pointer; font-weight:bold;">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
        </div>
    </header>

    <div class="content-body">
        <!-- â˜… ã“ã“ã«ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«è¦‹ã›ãŸã„ä¸­èº«ã‚’è‡ªç”±ã«æ›¸ã„ã¦ãã ã•ã„ -->
        <!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ã‚¯ãƒªãƒƒã‚¯é€£æ‰“</title>
    <style>
        body { font-family: 'Courier New', sans-serif; text-align: center; background: #000; color: #0f0; padding-top: 30px; overflow: hidden; }
        #btn { width: 160px; height: 160px; border-radius: 50%; border: 4px solid #0f0; background: transparent; color: #0f0; font-size: 20px; font-weight: bold; cursor: pointer; transition: 0.05s; outline: none; box-shadow: 0 0 15px #0f0; }
        #btn:active { background: #0f0; color: #000; transform: scale(1.1); }
        #btn:disabled { border-color: #333; color: #333; box-shadow: none; }
        .info { font-size: 1.2rem; margin: 10px; }
        .high-score { color: #ffeb3b; text-shadow: 0 0 10px #ffeb3b; }
        #retry-btn { display: none; padding: 10px 20px; font-size: 18px; background: #fff; color: #000; border: none; cursor: pointer; margin-top: 15px; font-weight: bold; }
        #rank { font-size: 2rem; color: #ff00ff; margin-top: 10px; font-weight: bold; text-shadow: 0 0 10px #ff00ff; }
    </style>
</head>
<body>
    <h1>CLICKER OS v2.6</h1>
    <div class="info">BEST: <span id="highScore" class="high-score">0</span></div>
    <div class="info">TIME: <span id="time">10</span>s | SCORE: <span id="score">0</span></div>
    
    <button id="btn">INITIALIZE</button><br>
    <div id="rank"></div>
    <button id="retry-btn" onclick="resetGame()">REBOOT</button>
    <p id="msg"></p>

    <script>
        let score = 0, timeLeft = 10, active = false, timerId = null, bgmId = null;
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(f, type, d, vol = 0.1) {
            const o = audioCtx.createOscillator(), g = audioCtx.createGain();
            o.type = type; o.frequency.setValueAtTime(f, audioCtx.currentTime);
            g.gain.setValueAtTime(vol, audioCtx.currentTime);
            g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + d);
            o.connect(g); g.connect(audioCtx.destination);
            o.start(); o.stop(audioCtx.currentTime + d);
        }

        function startBGM() {
            let step = 0;
            const notes = [110, 110, 146, 110, 164, 110, 146, 130]; 
            bgmId = setInterval(() => {
                playSound(notes[step % notes.length], 'square', 0.2, 0.05);
                step++;
            }, 250);
        }

        const btn = document.getElementById('btn'), retryBtn = document.getElementById('retry-btn');
        const scoreDisp = document.getElementById('score'), timeDisp = document.getElementById('time');
        const highScoreDisp = document.getElementById('highScore'), rankDisp = document.getElementById('rank');

        let savedScore = localStorage.getItem('ultra_click_score') || 0;
        highScoreDisp.innerText = savedScore;

        btn.onclick = () => {
            if (timeLeft <= 0) return;
            playSound(440 + score, 'triangle', 0.1);
            if (!active) {
                active = true;
                btn.innerText = "PUSH";
                startBGM();
                timerId = setInterval(() => {
                    timeLeft--; timeDisp.innerText = timeLeft;
                    if (timeLeft <= 0) { clearInterval(timerId); clearInterval(bgmId); finish(); }
                }, 1000);
            }
            score++; scoreDisp.innerText = score;
        };

        function getRank(s) {
            if (s >= 1000) return"fraud(ã‚ãªãŸçµ¶å¯¾ä¸æ­£ã—ã¦ãªã„?)"
			if (s >= 200) return "GOD (ç¥ã•ã¾ã‚)";
            if (s >= 150)  return "AI(AIã‚’è¶…ãˆãŸäºº!)";
            if (s >= 80)  return "LEGEND (ã‚ãªãŸã™ã”ã„ã‚ˆï¼)";
            if (s >= 70)  return "PRO (ã™ã”ã„ã˜ã‚ƒã‚“)";
            if (s >= 40)  return "AMATEUR (é€Ÿã„ã§ã™ã­)";
            return "NOOB (åˆå¿ƒè€…)";
        }

        
function finish() {
    btn.disabled = true;
    
    
    let currentBest = parseInt(localStorage.getItem('ultra_click_score')) || 0;

    if (score > currentBest) {
        
        localStorage.setItem('ultra_click_score', score);
        highScoreDisp.innerText = score;
        
        [523.25, 659.25, 783.99].forEach((f, i) => 
            setTimeout(() => playSound(f, 'sine', 0.4, 0.1), i * 100)
        );
        document.getElementById('msg').innerText = "ğŸ”¥ NEW RECORD!! ğŸ”¥";
    } else {
        highScoreDisp.innerText = currentBest;
        playSound(150, 'sawtooth', 0.5, 0.1); 
        document.getElementById('msg').innerText = "GAME OVER";
    }
    
    rankDisp.innerText = getRank(score);
    retryBtn.style.display = "inline-block";
}


        function resetGame() {
            score = 0; timeLeft = 10; active = false;
            scoreDisp.innerText = 0; timeDisp.innerText = 10;
            rankDisp.innerText = ""; document.getElementById('msg').innerText = "";
            btn.disabled = false; btn.innerText = "INITIALIZE";
            retryBtn.style.display = "none";
        }
    </script>
</body>
</html>

        <!-- â˜… ã“ã“ã¾ã§ -->
    </div>
</div>

<script>
    const API_URL = 'https://sparkling-pine-6d7c.kaito20158169.workers.dev';

    // åˆæœŸåŒ–ãƒã‚§ãƒƒã‚¯ (ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¶­æŒ)
    (function init() {
        const session = sessionStorage.getItem('mm_access_key');
        if (session) {
            unlockPage(session);
        }
    })();

    // ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†
    async function handleLogin() {
        const id = document.getElementById('mm-id').value.trim();
        const pw = document.getElementById('mm-pw').value.trim();
        const status = document.getElementById('mm-status');

        if (!id || !pw) return;

        try {
            // Workerã‹ã‚‰ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã¦ç…§åˆ
            const res = await fetch(`${API_URL}/get?key=auth:${id}`);
            const data = await res.json();

            if (data.value === String(pw)) {
                sessionStorage.setItem('mm_access_key', id);
                unlockPage(id);
            } else {
                status.innerText = "èªè¨¼å¤±æ•—ã€‚IDã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™ã€‚";
                status.style.color = "#ff4c4c";
            }
        } catch (e) {
            status.innerText = "ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ã€‚æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚";
        }
    }

    // ãƒšãƒ¼ã‚¸ã‚’ã‚¢ãƒ³ãƒ­ãƒƒã‚¯
    function unlockPage(user) {
        document.getElementById('mm-auth-overlay').style.display = 'none';
        document.getElementById('main-app').style.display = 'block';
        document.getElementById('user-display').innerText = "ğŸ‘¤ " + user;
    }

    // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
    function logout() {
        sessionStorage.clear();
        location.reload();
    }
</script>
</body>
</html>
